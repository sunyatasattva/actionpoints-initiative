Battle={},function(t){function e(t,e){this.name=t,this.speed=e,this.initiative=this.speed+Math.ceil(10*Math.random()),this.ct=0,this.cycle=0}function a(){return l.sort(function(t,e){return e.speed-t.speed}),l.forEach(function(t){var e
e=$("<li>").html(t.name+"<span>"+"(0/"+t.initiative+"/0)"),$("#characterList").append(e)}),activeCharacter=l[0]}function c(t){function e(){var t
for(l.sort(function(t,e){return 0===t.cycle-e.cycle?0!==t.ct-e.ct?t.ct-e.ct:e.speed-t.speed:t.cycle-e.cycle}),nextCycle=l.every(function(t){return t.cycle!==n}),nextCycle&&n++,i=0;i<l.length;i++)if(l[i].cycle==n){t=l[i]
break}return t}return t=+t,activeCharacter.ct+=t,activeCharacter.ct>activeCharacter.initiative&&(activeCharacter.ct=activeCharacter.ct-activeCharacter.initiative,activeCharacter.cycle++),activeCharacter=e(),r(),activeCharacter.name}function r(){var t,e
$("#characterList").empty(),$("h3 span").html(n),l.forEach(function(a){e=$("<span>").html("("+a.ct+"/"+a.initiative+"/"+a.cycle+")"),t=$("<li>").html(a.name).append(e),$("#characterList").append(t)})}var n,l=[]
n=0,t.globalCycle=n,t.characters=l,t.initialize=a,t.Character=e,t.passTurn=c}(Battle),$("#addCharacter").click(function(){var t=$("#chrName").val(),e=+$("#chrSpeed").val(),a=new Battle.Character(t,e)
return Battle.characters.push(a),$("#feedback").html(a.name+" joined the combat"),a}),$("#initialize").click(function(){return Battle.initialize(),$("#ini").empty(),Battle.characters}),$("#passTurn").click(function(){var t=+$("#cooldown").val()
return $("#cooldown").val(""),Battle.passTurn(t)})
